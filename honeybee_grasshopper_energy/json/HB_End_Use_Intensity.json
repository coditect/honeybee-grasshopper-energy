{
  "code": "\nimport os\nimport subprocess\nimport json\n\nfrom collections import OrderedDict\n\ntry:\n    from ladybug.datatype.area import Area\n    from ladybug.datatype.energyintensity import EnergyIntensity\n    from ladybug.datatype.energy import Energy\nexcept ImportError as e:\n    raise ImportError('\\nFailed to import ladybug:\\n\\t{}'.format(e))\n\ntry:\n    from honeybee.config import folders\nexcept ImportError as e:\n    raise ImportError('\\nFailed to import honeybee:\\n\\t{}'.format(e))\n\ntry:\n    from ladybug_{{cad}}.{{plugin}} import all_required_inputs\nexcept ImportError as e:\n    raise ImportError('\\nFailed to import ladybug_{{cad}}:\\n\\t{}'.format(e))\n\n\nif all_required_inputs(ghenv.Component):\n    # ensure that _sql is a list rather than a single string\n    if isinstance(_sql, basestring):\n        _sql = [_sql]\n\n    # use the honybee CLI to compute EUI\n    cmds = [folders.python_exe_path, '-m', 'honeybee_energy', 'result',\n            'energy-use-intensity']\n    cmds.extend(_sql)\n    process = subprocess.Popen(cmds, stdout=subprocess.PIPE)\n    stdout = process.communicate()\n    results = json.loads(stdout[0], object_pairs_hook=OrderedDict)\n\n    # place results into output variables\n    eui = results['eui']\n    gross_floor = results['total_floor_area']\n    eui_end_use = results['end_uses'].values()\n    end_uses = [use.replace('_', ' ').title() for use in results['end_uses'].keys()]\n\n    # convert data to IP if requested\n    if ip_:\n        eui_typ, a_typ, e_typ = EnergyIntensity(), Area(), Energy()\n        eui = round(eui_typ.to_ip([eui], 'kWh/m2')[0][0], 3)\n        gross_floor = round(a_typ.to_ip([gross_floor], 'm2')[0][0], 3)\n        eui_end_use = [round(eui_typ.to_ip([val], 'kWh/m2')[0][0], 3)\n                       for val in eui_end_use]\n", 
  "version": "1.2.1", 
  "description": "Get information about end use intensity from an EnergyPlus SQL file.\n-", 
  "outputs": [
    [
      {
        "name": "eui", 
        "type": null, 
        "access": "None", 
        "description": "The total end use intensity result from the simulation. Specifically,\nthis is the sum of all electricity, fuel, district heating/cooling,\netc. divided by the gross floor area (including both conditioned\nand unconditioned spaces). The value will be in kWh/m2 if ip_\nis False or None and kBtu/ft2 if True.", 
        "default": null
      }, 
      {
        "name": "eui_end_use", 
        "type": null, 
        "access": "None", 
        "description": "The end use intensity result from the simulation, broken down by each\nend use. These values coorespond to the end_uses output below. Values\nwill be in kWh/m2 if ip_ is False or None and kBtu/ft2 if True.", 
        "default": null
      }, 
      {
        "name": "end_uses", 
        "type": null, 
        "access": "None", 
        "description": "A list of text for each of the end uses in the simulation (Heating,\nCooling, etc.). Thes outputs coorespond to the eui_end_use\noutput above.", 
        "default": null
      }, 
      {
        "name": "gross_floor", 
        "type": null, 
        "access": "None", 
        "description": "The total gross floor area of the energy model. This can be used\nto compute the total energy use from the intensity values above or\nit can be used to help with other result post-processing. The value\nwill be in m2 if ip_ is False or None and ft2 if True.", 
        "default": null
      }
    ]
  ], 
  "nickname": "EUI", 
  "name": "HB End Use Intensity", 
  "category": "HB-Energy", 
  "inputs": [
    {
      "name": "_sql", 
      "type": "string", 
      "access": "list", 
      "description": "The file path of the SQL result file that has been generated from\nan energy simulation. This can also be a list of EnergyPlus files\nin which case, EUI will be computed across all files.", 
      "default": null
    }, 
    {
      "name": "ip_", 
      "type": "bool", 
      "access": "item", 
      "description": "Boolean to note whether the EUI should be in SI (kWh/m2) or IP\n(kBtu/ft2) units. (Default: False).", 
      "default": null
    }
  ], 
  "subcategory": "6 :: Result"
}